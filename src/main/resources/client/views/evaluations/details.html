<div class="page" ng-controller="EvasDetailsController">
	<div class="panel panel-default ens-edit">
		<div class="panel-heading">
			<strong><span class="glyphicon glyphicon-th"></span>
				Ã©valuation</strong>
		</div>
		<div class="panel-body">
<!-- Edition -->
			<div ng-show="edit">
				<form class="form-horizontal" name="evaForm">
					<div class="form-group">
						<label for="" class="col-sm-2">Numéro Evaluation:<span id="required-field">*</span></label>
						<div class="col-sm-10">
							<input type="number" class="form-control" ng-model="evaluation.noEvaluation" name="noEvaluation" required>
							<span style="color:red" ng-show="evaForm.noEvaluation.$dirty && evaForm.noEvaluation.$invalid">
							<span ng-show="evaForm.noEvaluation.$error.required">Champ obligatoire / Type invalide</span></span>
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Désignation:<span id="required-field">*</span></label>
						<div class="col-sm-10">
							<input type="text" class="form-control" ng-model="evaluation.designation" name="designation"required>
							<span style="color:red" ng-show="evaForm.designation.$dirty && evaForm.designation.$invalid">
							<span ng-show="evaForm.designation.$error.required">Champ obligatoire / Type invalide</span></span>
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Etat:<span id="required-field">*</span></label>
						<div class="col-sm-10">
<!-- 							<input ng-show="edit" type="text" class="form-control" -->
<!-- 								ng-model="evaluation.etat"/> -->
							<select ng-hide="isVisible" ng-model="etatSelected" name="etat" required>
								<option data-ng-repeat="e in etats" value="{{e.rvAbbreviation}}">{{e.rvMeaning}}</option>
							</select>
							<span style="color:red" ng-show="evaForm.etat.$dirty && evaForm.etat.$invalid">
							<span ng-show="evaForm.etat.$error.required">Champ obligatoire / Type invalide</span></span>
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Période:</label>
						<div class="col-sm-10">
							<input type="text" class="form-control"
								ng-model="evaluation.periode">
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Début:<span id="required-field">*</span></label>
						<div class="col-sm-2">
							<input type="text" class="form-control" ng-model="evaluation.debutReponse" name="debutReponse" required>
							<span style="color:red" ng-show="evaForm.debutReponse.$dirty && evaForm.debutReponse.$invalid">
							<span ng-show="evaForm.debutReponse.$error.required">Champ obligatoire / Type invalide</span></span>
						</div>
						<label for="" class="col-sm-2">Fin:<span id="required-field">*</span></label>
						<div class="col-sm-2">
							<input type="text" class="form-control" ng-model="evaluation.finReponse" name="finReponse" required>
							<span style="color:red" ng-show="evaForm.finReponse.$dirty && evaForm.finReponse.$invalid">
							<span ng-show="evaForm.finReponse.$error.required">Champ obligatoire / Type invalide</span></span>
						</div>
					</div>
					
					<div class="form-group">
						<label for="" class="col-sm-2">Promotion:<span id="required-field">*</span></label>
						<div class="col-sm-10">
							<select name="promotion" ng-model="selectedPromotion" ng-options="promotion.promotionPK.codeFormation+' -- '+promotion.promotionPK.anneeUniversitaire for promotion in promotionevaluation" ng-change="onchangePro()">
                            </select>
							<span style="color:red" ng-show="evaForm.promotion.$dirty && evaForm.promotion.$invalid">
							<span ng-show="evaForm.promotion.$error.required">Champ obligatoire / Type invalide</span></span>
						</div>
					</div>
					
					<div class="form-group">
						<label for="" class="col-sm-2">UnitÃ© Enseignement:<span id="required-field">*</span></label>
						<div class="col-sm-10">
							<input type="text" class="form-control"
								ng-model="evaluation.code_ue" ng-show="isVisible"/>
							<select name="ue" ng-model="ueSelected" ng-options="ue.uniteEnseignementPK.codeUe+' - '+ue.designation for ue in ues"  ng-change="onchange()">
                         </select>
							<span style="color:red" ng-show="evaForm.ue.$dirty && evaForm.ue.$invalid">
							<span ng-show="evaForm.ue.$error.required">Champ obligatoire / Type invalide</span></span>
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Element Constitutif:</label>
						<div class="col-sm-10">
							<input  type="text" class="form-control"
								ng-model="evaluation.code_ec" ng-show="isVisible">
							<!-- select ng-hide="isvisible" ng-model="ecSelected" name="ec">
								<option data-ng-repeat="e in ECs" value="{{e.elementConstitutifPK.codeEc}}">{{e.elementConstitutifPK.codeEc}}</option>
							</select-->
							<select ng-model="ecSelected" ng-options="ec.designation for ec in ecs" ng-change="onchangeEC()">
                            </select>
						</div>
					</div>

				</form>
				<button ng-click="submit()" class="btn btn-success"
					ng-disabled="evaForm.noEvaluation.$dirty && evaForm.noEvaluation.$invalid
								|| evaForm.designation.$dirty && evaForm.designation.$invalid
								|| evaForm.etat.$dirty && evaForm.etat.$invalid
								|| evaForm.debutReponse.$dirty && evaForm.debutReponse.$invalid
								|| evaForm.finReponse.$dirty && evaForm.finReponse.$invalid
								|| evaForm.codeFormation.$dirty && evaForm.codeFormation.$invalid
								|| evaForm.promotion.$dirty && evaForm.promotion.$invalid
								|| evaForm.ue.$dirty && evaForm.ue.$invalid
								|| evaForm.noEvaluation.$error.required
								|| evaForm.designation.$error.required
								|| evaForm.etat.$error.required
								|| evaForm.debutReponse.$error.required
								|| evaForm.finReponse.$error.required
								|| evaForm.codeFormation.$error.required
								|| evaForm.promotion.$error.required
								|| evaForm.ue.$error.required
								">Valider</button>
				<button class="btn btn-danger pull-right" ng-click="cancel()">
					Annuler</button>
<!-- Consultation -->
			<div class="media animate" ng-hide="edit">
				<button class="btn btn-warning pull-right" ng-click="edition()">
					<span class="glyphicon glyphicon-pencil"></span> Editer
				</button>
				<div class="media-body">
					<ul class="list-unstyled list-info">
						<li><label>Désignation</label> {{evaluation.designation}}<br /></li>
						<li><label>Code Formation</label> {{evaluation.code_formation}}</li>
						<li><label>Année Universitaire</label> {{evaluation.annee}}</li>
						<li><label>Code UE</label>{{evaluation.code_ue}}</li>
						<li><label>Etat</label>{{evaluation.etat}}</li>
						<li><label>Enseignant</label>{{evaluation.noEnseignant.nom}} {{evaluation.noEnseignant.prenom}}</li>
						<li><label>Début réponse</label>{{evaluation.debutReponse | date: "dd/MM/yyyy"}}</li>
						<li><label>Fin réponse</label> {{evaluation.finReponse | date: "dd/MM/yyyy"}}</li>
					</ul>
				</div>
				<a class="btn btn-primary" href="#/admin/elementConstitutif">
				<span class="glyphicon glyphicon-arrow-left"></span> Retour</a>
			</div>


			</div>
		</div>
	</div>
</div>
