<!-- 
 -- Author Kenza ABOUAKIL
 -- Détails d'une promotion
 -->
<div class="page" ng-controller="PromotionDetailsController">
	<div class="panel panel-default ens-edit">
		<div class="panel-heading">

			<strong><span class="glyphicon glyphicon-th"></span> Promotion</strong>

		</div>
		<div class="panel-body">
			<!--------------------------- Consultation --------------------------->
			<div class="media animate" ng-hide="edit">
				<button class="btn btn-warning pull-right" ng-click="edition()">
					<span class="glyphicon glyphicon-pencil"></span> Editer
				</button>
				<div class="media-body">
					<ul class="list-unstyled list-info">
						<li><label>Ann&eacute;e universitaire</label> {{promotion.promotionPK.anneeUniversitaire}}<br /></li>
						<li><label>Code formation</label> {{promotion.promotionPK.codeFormation}}</li>
						<li><label>Sigle</label>{{promotion.siglePromotion}}</li>
						<li><label>Responsable</label>{{responsable.nom}} {{responsable.prenom}}</li>
						<li><label>Date de rentr&eacute;e</label> {{promotion.dateRentree | date: "dd/MM/yyyy"}}</li>
						<li><label>Lieu de rentr&eacute;e</label> {{promotion.lieuRentree}}</li>
						<li><label>Processus de stage</label> {{promotion.processusStage}}</li>
						<li><label>Commentaire</label>{{promotion.commentaire}}</li>
						<li><label>Nombre max d'&eacute;tudiants</label> {{promotion.nbMaxEtudiant}}</li>
					</ul>
				</div>
				<div class="row">
					<div class="col-md-6" ng-show="promotion.etudiantCollection.length">
						<div class="panel-body table-responsive">
							<strong><span class="fa fa-university"></span> Etudiants</strong>
							<table class="table">
								<thead>
									<tr>
										<th>Num &eacute;tudiant</th>
										<th>Nom</th>
										<th>Pr&eacute;nom</th>
										<th>E-mail</th>
									</tr>
								</thead>
								<tbody>
									<tr ng-repeat="e in promotion.etudiantCollection" ng-click="etudiantDetails(e.noEtudiant)">
										<td>{{e.noEtudiant}}</td>
										<td>{{e.nom}}</td>
										<td>{{e.prenom}}</td>
										<td>{{e.emailUbo}}</td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
				<a class="btn btn-primary" href="#/admin/promotions"><span
					class="glyphicon glyphicon-arrow-left"></span> Retour</a>
			</div>

			<!--------------------------- Edition --------------------------->
			<div ng-show="edit">
				<form class="form-horizontal" name="promotionForm">
					<div class="form-group">
						<label for="" class="col-sm-2">Ann&eacute;e universitaire<span id="required-field">*</span></label>
						<div class="col-sm-10">
							<input  type="text" class="form-control" id="anneeUniversitaire" name="anneeUniversitaire" maxlength="9"
								ng-model="promotion.promotionPK.anneeUniversitaire" ng-readonly="!ajout" ng-pattern="/[1,2]0[0-9][0-9]-[1,2]0[0-9][0-9]/" 
								placeholder="yyyy-yyyy" ng-keyup="changeAnneeUniv()">
							<span style="color:red" ng-show="promotionForm.anneeUniversitaire.$dirty && promotionForm.anneeUniversitaire.$invalid">
							<span ng-show="promotionForm.anneeUniversitaire.$error.required">Champ obligatoire / Type invalide</span>
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Code formation<span id="required-field">*</span></label>
						<div class="col-sm-10">
							<select ng-show="ajout" ng-model="formationSelected" name="codeFormation">
								<option data-ng-repeat="f in formations" value="{{f.codeFormation}}">{{f.codeFormation}}</option>
							</select>
							<span style="color:red" ng-show="promotionForm.codeFormation.$dirty && promotionForm.codeFormation.$invalid">
							<span ng-show="promotionForm.codeFormation.$error.required">Champ obligatoire / Type invalide</span></span>
							<input ng-hide="ajout" type="text" class="form-control" ng-model="promotion.promotionPK.codeFormation" ng-readonly="true">
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Sigle<span id="required-field">*</span></label>
						<div class="col-sm-10">
							<input type="text" class="form-control" ng-model="promotion.siglePromotion" name="siglePromotion" maxlength="16" required>
							<span style="color:red" ng-show="promotionForm.siglePromotion.$dirty && promotionForm.siglePromotion.$invalid">
							<span ng-show="promotionForm.siglePromotion.$error.required">Champ obligatoire / Type invalide</span>
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Responsable</label>
						<div class="col-sm-10">
							<select ng-show="edit" name="listeEnseignants" ng-model="enseignantSelected" ng-change="test()">
								<option data-ng-repeat="e in enseignants" value="{{e.noEnseignant}}" ng-selected="{{e.noEnseignant == responsable.noEnseignant}}">{{e.noEnseignant}}. {{e.nom}} {{e.prenom}}</option>
							</select>
							<input ng-hide="edit" type="text" class="form-control"
								ng-model="enseignants.nom"
								placeholder="Nom Responsable"></br>
							<input ng-hide="edit" type="text"
								class="form-control" ng-model="enseignants.prenom"
								placeholder="Pr&eacute;nom Responsable">
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Date de rentr&eacute;e</label>
						<div class="col-sm-10">
							<input type="text" class="form-control"
								ng-model="promotion.dateRentree" placeholder="dd/mm/yyyy" >
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Lieu de rentr&eacute;e</label>
						<div class="col-sm-10">
							<input type="text" class="form-control"
								ng-model="promotion.lieuRentree" maxlength="12">
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Processus de stage</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" maxlength="5"
								ng-model="promotion.processusStage">
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Commentaire</label>
						<div class="col-sm-10">
							<input type="text" class="form-control" maxlength="255"
								ng-model="promotion.commentaire">
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Nombre max d'&eacute;tudiants<span id="required-field">*</span></label>
						<div class="col-sm-10">
							<input type="number" class="form-control" ng-model="promotion.nbMaxEtudiant" name="nbMaxEtudiant" maxlength="3" required>
							<span style="color:red" ng-show="promotionForm.nbMaxEtudiant.$dirty && promotionForm.nbMaxEtudiant.$invalid">
							<span ng-show="promotionForm.nbMaxEtudiant.$error.required">Champ obligatoire / Type invalide</span>
						</div>
					</div>
				</form>
				<a class="btn btn-success" ng-click="submit()"
					ng-disabled="promotionForm.anneeUniversitaire.$dirty && promotionForm.anneeUniversitaire.$invalid || promotionForm.nbMaxEtudiant.$dirty && promotionForm.nbMaxEtudiant.$invalid || 
								promotionForm.siglePromotion.$dirty && promotionForm.siglePromotion.$invalid || promotionForm.codeFormation.$dirty && promotionForm.codeFormation.$invalid || promotionForm.$invalid"><span
					class="glyphicon glyphicon-ok"></span> Valider</a>
				<button class="btn btn-danger pull-right" ng-click="cancel()">Annuler</button>
			</div>
		</div>
	</div>
</div>
