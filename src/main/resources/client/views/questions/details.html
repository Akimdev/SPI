<!-- 
-- @Author Zouhair JEMMAA
-- Détails d'une question
-->
<div class="page" ng-controller="QuestionDetailsController">
	<div class="panel panel-default ens-edit">
		<div class="panel-heading">
			<strong><span class="glyphicon glyphicon-th"></span>Question</strong>
		</div>
		<div class="panel-body">
			<!--------------------------- Consultation --------------------------->
			<!-- @Author Kenza ABOUAKIL -->
			<div class="media animate" ng-hide="edit">
				<button class="btn btn-warning pull-right" ng-click="edition()">
					<span class="glyphicon glyphicon-pencil"></span> Editer
				</button>
				<div class="media-body">
					<ul class="list-unstyled list-info">
						<li><label>Intitul&eacute;</label> {{question.intitule}}<br /></li>
						<li><label>Type</label> {{question.type}}</li>
						<li><label>Qualificatif</label>{{qualif.idQualificatif}} / {{qualif.maximal}} - {{qualif.minimal}}</li>
					</ul>
				</div>
				<a class="btn btn-primary" href="#/admin/questions"><span
					class="glyphicon glyphicon-arrow-left"></span> Retour</a>
			</div>
			
			<!--------------------------- Edition ------------------------- -->
			<div ng-show="edit">
				<form class="form-horizontal">
			<div>
				<toaster-container toaster-options="{'position-class': 'toast-bottom-right'}"></toaster-container>
				<form class="form-horizontal elegant-aero" name="questionForm">
				<div ng-repeat="alert in alerts" ng-show="alert.show">
       				 <alert type="alert.type" close="closeAlert($index)">{{alert.msg}}</alert>
      			</div>
					<div class="form-group">
						<label for="" class="col-sm-2">idQuestion<span id="required-field">*</span></label>
						<div class="col-sm-10">
							<input type="number" class="form-control" name="idQuestion" min="1"
								ng-model="question.idQuestion" ng-disabled="true" required>
								<span style="color:red" ng-show="questionForm.idQuestion.$dirty && questionForm.idQuestion.$invalid">
								<span ng-show="questionForm.idQuestion.$error.required">IdQuestion obligatoire ou type invalide.</span>
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Intitul&eacute;<span id="required-field">*</span></label>
						<div class="col-sm-10">
							<input type="text" class="form-control" name="intitule" ng-model="question.intitule" ng-maxlength="64" ng-pattern="/^[A-Za-z0-9' \-çéèàêîûù]+$/" required>
							<span style="color:red" ng-show="questionForm.intitule.$dirty && questionForm.intitule.$invalid">
							<span ng-show="questionForm.intitule.$error.required">Intitul&eacute; obligatoire ou type invalide.</span>
						</div>
					</div>
					<div class="form-group">
						<label for="" class="col-sm-2">Type<span id="required-field">*</span></label>
						<div class="col-sm-10">
							<input type="text" class="form-control" name="type" ng-model="question.type" ng-init="question.type='QUS'" ng-disabled="true" required>
							<span style="color:red" ng-show="questionForm.type.$dirty && questionForm.type.$invalid">
							<span ng-show="questionForm.type.$error.required">Champs obligatoire ou type invalide.</span>
						</div>
					</div>
					
					<div class="form-group">
						<label for="" class="col-sm-2">Qualificatif<span id="required-field">*</span></label>
						<div class="col-sm-10">
						    <!-- <select name="qualificatif"
						      ng-options="q.qualif as (q.idQualificatif + '/ ' + q.maximal + ' - ' + q.minimal) for q in qualificatifs.availableOptions track by q.idQualificatif"
						      ng-model="qualificatifs.selectedOption"></select> -->
						      
						    <select name="qualificatif" ng-model="qualificatif">
								<option data-ng-repeat="q in qualificatifs" value="{{q.idQualificatif}}" ng-selected="{{q.idQualificatif == selectedOption.idQualificatif}}">{{q.idQualificatif}} / {{q.maximal}} - {{q.minimal}}</option>
							</select>
						      
							<span style="color:red" ng-show="questionForm.qualificatif.$dirty && questionForm.qualificatif.$invalid">
							<span ng-show="questionForm.qualificatif.$error.required">Champs obligatoire ou type invalide.</span>
						</div>
					</div>
					
				</form>
				<a class="btn btn-success" ng-click="submit()"
				ng-disabled="questionForm.idQuestion.$dirty && questionForm.idQuestion.$invalid ||  
				questionForm.intitule.$dirty && questionForm.intitule.$invalid ||  
				questionForm.type.$dirty && questionForm.type.$invalid|| questionForm.$invalid"><span
					class="glyphicon glyphicon-ok"></span> Valider</a>
				<button class="btn btn-danger pull-right" ng-click="cancel()">Annuler</button>
			</div>
		</div>
	</div>
</div>
