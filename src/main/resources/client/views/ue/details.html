<div class="page" ng-controller="UEDetailsController">
  <div class="panel panel-default ens-edit">
    <div class="panel-heading"><strong><span class="glyphicon glyphicon-th"></span> Unités d'Enseignement</strong></div>
    <div class="panel-body">
    				<!--------------------------- Consultation --------------------------->
			<div class="media animate" ng-show="!edit">
				<button class="btn btn-warning pull-right" ng-click="edition()">
					<span class="glyphicon glyphicon-pencil"></span> Editer
				</button>
				<div class="media-body">
					<ul class="list-unstyled list-info">
						<li><label>Unit&eacute; Enseignement</label> {{ue.uniteEnseignementPK.codeUe}}<br /></li>
						<li><label>Formation</label> {{ue.uniteEnseignementPK.codeFormation}}</li>
						<li><label>D&eacute;signation</label>{{ue.designation}}</li>
						<li><label>Enseignant responsable</label> {{ue.noEnseignant.nom}} {{ue.noEnseignant.prenom}}</li>
						<li><label>Nombre heures (CM / TD / TP)</label>{{ue.nbhCm}} {{ue.nbhTd}} {{ue.nbhTp}}</li>
						<li><label>Semestre</label> {{ue.semestre}}</li>
					</ul>
				</div>
				<a class="btn btn-primary" href="#/admin/ue"><span
					class="glyphicon glyphicon-arrow-left"></span> Retour</a>
			</div>        
        <!-- Edition -->
        <div ng-show="edit">            
            <form class="form-horizontal" name="ueForm">
                <div class="form-group">
                    <label for="" class="col-sm-2">Unité d'Enseignement:<span id="required-field">*</span></label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="codeUe" ng-disabled="!ajout" ng-model="ue.uniteEnseignementPK.codeUe" maxlength="8" ng-pattern="/[A-Z0-9]/">
                        <span style="color:red" ng-show="ueForm.codeUe.$dirty && ueForm.codeUe.$invalid">
						<span ng-show="ueForm.codeUe.$error.required">Champs obligatoire ou type invalide.</span>
                    </div>                    
                </div>                
                <div class="form-group">
                    <label for="" class="col-sm-2">Formation:<span id="required-field">*</span></label>
                    <div class="col-sm-10">
	                    <select ng-model="ue.uniteEnseignementPK.codeFormation" name="codeFormation" ng-disabled="!ajout">
							<option data-ng-repeat="f in formations" value="{{f.codeFormation}}">{{f.codeFormation}}</option>
						</select>                        
                        <span style="color:red" ng-show="ueForm.codeFormation.$dirty && ueForm.codeFormation.$invalid">
						<span ng-show="ueForm.codeFormation.$error.required">Champs obligatoire ou type invalide.</span>
                    </div> 
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2">Enseignant:<span id="required-field">*</span></label>
                    <div class="col-sm-10">
	                    <select ng-model="enseignant" name="enseignant">
							<option data-ng-repeat="ens in enseignants" value="{{ens.noEnseignant}}" ng-selected="{{ens.noEnseignant == responsable.noEnseignant}}">{{ens.nom}} {{ens.prenom}}</option>
						</select>                        
                        <span style="color:red" ng-show="ueForm.enseignant.$dirty && ueForm.enseignant.$invalid">
						<span ng-show="ueForm.enseignant.$error.required">Champs obligatoire ou type invalide.</span>
                    </div> 
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2">Désignation:<span id="required-field">*</span></label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" name="designation" ng-model="ue.designation" maxlength="64">
                        <span style="color:red" ng-show="ueForm.designation.$dirty && ueForm.designation.$invalid">
						<span ng-show="ueForm.designation.$error.required">Champs obligatoire ou type invalide.</span>
                    </div>                    
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2">Semestre:<span id="required-field">*</span></label>
                    <div class="col-sm-10">
                        <input type="number" class="form-control" name="semestre" ng-model="ue.semestre">
                        <span style="color:red" ng-show="ueForm.semestre.$dirty && ueForm.semestre.$invalid">
						<span ng-show="ueForm.semestre.$error.required">Champs obligatoire ou type invalide.</span>
                    </div>                    
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2">Description:</label>
                    <div class="col-sm-10">
                        <input type="text" class="form-control" ng-model="ue.description">
                    </div>                    
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2">Nombres d'heures (CM):</label>
                    <div class="col-sm-10">
                        <input type="number" class="form-control" ng-model="ue.nbhCm">
                    </div>                    
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2">Nombres d'heures (TD):</label>
                    <div class="col-sm-10">
                        <input type="number" class="form-control" ng-model="ue.nbhTd">
                    </div>                    
                </div>
                <div class="form-group">
                    <label for="" class="col-sm-2">Nombres d'heures (TP):</label>
                    <div class="col-sm-10">
                        <input type="number" class="form-control" ng-model="ue.nbhTp">
                    </div>                    
                </div>                
	            <button ng-click="submit()" class="btn btn-success" 
		                ng-disabled="ueForm.codeUe.$dirty && ueForm.codeUe.$invalid || ueForm.codeFormation.$dirty && ueForm.codeFormation.$invalid ||
					            	 ueForm.enseignant.$dirty && ueForm.enseignant.$invalid || ueForm.designation.$dirty && ueForm.designation.$invalid ||
					            	 ueForm.semestre.$dirty && ueForm.semestre.$invalid
					            	 ">Valider</button>
	            <button class="btn btn-danger pull-right" ng-click="cancel()"> Annuler</button>
            </form>
        </div>
        <br/>
        <table class="table table-bordered table-striped table-responsive" ng-show="!edit">
            <thead>
                <tr>
                	<th><div class="th">
                        Element constitutif
                        <span class="glyphicon glyphicon-chevron-up"
                              data-ng-click=" order('diplome') "
                              data-ng-class="{active: row == 'diplome'}"></span>
                        <span class="glyphicon glyphicon-chevron-down"
                              data-ng-click=" order('-diplome') "
                              data-ng-class="{active: row == '-diplome'}"></span>
                    </div></th>
                	<th><div class="th">
                        Formation
                        <span class="glyphicon glyphicon-chevron-up"
                              data-ng-click=" order('email') "
                              data-ng-class="{active: row == 'email'}"></span>
                        <span class="glyphicon glyphicon-chevron-down"
                              data-ng-click=" order('-email') "
                              data-ng-class="{active: row == '-email'}"></span>
                    </div></th> 
                    <th><div class="th">
						Unite d'enseignement
                        <span class="glyphicon glyphicon-chevron-up"
                              data-ng-click=" order('email') "
                              data-ng-class="{active: row == 'email'}"></span>
                        <span class="glyphicon glyphicon-chevron-down"
                              data-ng-click=" order('-email') "
                              data-ng-class="{active: row == '-email'}"></span>
                    </div></th>
                    <th><div class="th">
                        Designation
                        <span class="glyphicon glyphicon-chevron-up"
                              data-ng-click=" order('code') "
                              data-ng-class="{active: row == 'code'}"></span>
                        <span class="glyphicon glyphicon-chevron-down"
                              data-ng-click=" order('-code') "
                              data-ng-class="{active: row == '-code'}"></span>
                    </div></th>                   
                    <th><div class="th">
                        Heures (CM/TD/TP)
                        <span class="glyphicon glyphicon-chevron-up"
                              data-ng-click=" order('email') "
                              data-ng-class="{active: row == 'email'}"></span>
                        <span class="glyphicon glyphicon-chevron-down"
                              data-ng-click=" order('-email') "
                              data-ng-class="{active: row == '-email'}"></span>
                    </div></th>
                </tr>
            </thead>
            <tbody>
                <tr data-ng-repeat="e in ec" class="ec">
                    <td ng-click="">{{e.elementConstitutifPK.codeEc}}</td>
                    <td ng-click="">{{e.elementConstitutifPK.codeUe}}</td>
                    <td ng-click="">{{e.elementConstitutifPK.codeFormation}}</td>
                    <td ng-click="">{{e.description}}</td>
                    <td ng-click="">{{e.nbhCm}}/{{e.nbhTd}}/{{e.nbhTp}}</td>
                </tr>
            </tbody>
        </table>
    </div>
  </div>
</div>
